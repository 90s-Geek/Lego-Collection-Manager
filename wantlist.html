<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="90s Geek LEGO Collection Manager — browse and manage your LEGO want list.">
    <link rel="icon" type="image/webp" href="images/90s_Geek_logo.webp">
    <title>My LEGO Want List</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link rel="stylesheet" href="styles.css?v=3">
    <style>
        /* --- Want list amber colour overrides --- */
        h1 { color: #ffaa00; }

        .export-btn { background: #ffaa00; }
        .export-btn:hover { background: #cc8800; }

        .controls-panel { border-color: #3a2200; background: #0a0800; }
        .controls-panel-title { color: #664400; }
        .control-row label { color: #ffaa00; }
        .control-row select,
        .control-row input[type="text"] { color: #ffaa00; border-color: #ffaa00; }
        .control-row input[type="text"]::placeholder { color: #443300; }
        .control-row select:focus,
        .control-row input[type="text"]:focus { border-color: #fff; color: #fff; }
        .control-row select option { color: #ffaa00; }
        .clear-filters-btn:hover { border-color: #ffaa00; color: #ffaa00; }

        .collection-count span { color: #ffaa00; }
        .view-toggle button.active { border-color: #ffaa00; color: #ffaa00; background: #1a0e00; }

        .collection-item { border-color: #3a2200; background: #1a0e00; }
        .collection-item-info:hover { background: #221500; }
        #collection-list.grid-view .collection-item-info img { border-color: #ff00ff; }

        .modal-box { border-color: #ffaa00; box-shadow: 0 0 30px rgba(255, 170, 0, 0.2); }
        .modal-box h2 { color: #ffaa00; }
        .modal-box img { border-color: #ffaa00; }
        .modal-meta { border-top-color: #3a2200; }
        .modal-meta .value { color: #ffaa00; }
    </style>
</head>
<body data-page="wantlist">
    <a href="index.html"><img src="images/90s_Geek_logo.webp" alt="90s Geek Logo" class="logo"></a>

    <div class="nav">
        <a href="index.html">← SEARCH</a>
        <a href="collection.html">COLLECTION →</a>
    </div>

    <h1>♥ Want List</h1>

    <button class="export-btn" onclick="exportWantlist()">DOWNLOAD CSV (EXCEL)</button>

    <div class="controls-panel">
        <div class="controls-panel-title">> SORT &amp; FILTER</div>
        <div class="control-row">
            <label>Sort By:</label>
            <select id="sort-select" onchange="applyWantlistControls()">
                <option value="created_at|desc">Date Added (Newest First)</option>
                <option value="created_at|asc">Date Added (Oldest First)</option>
                <option value="name|asc">Name (A → Z)</option>
                <option value="name|desc">Name (Z → A)</option>
                <option value="year|desc">Year (Newest First)</option>
                <option value="year|asc">Year (Oldest First)</option>
                <option value="theme|asc">Theme (A → Z)</option>
            </select>
        </div>
        <div class="control-row">
            <label>Theme:</label>
            <select id="filter-theme" onchange="applyWantlistControls()">
                <option value="">All Themes</option>
            </select>
        </div>
        <div class="control-row">
            <label>Year:</label>
            <select id="filter-year" onchange="applyWantlistControls()">
                <option value="">All Years</option>
            </select>
        </div>
        <div class="control-row">
            <label>Search:</label>
            <input type="text" id="filter-name" placeholder="Type to search by name..." oninput="debouncedFilter()">
        </div>
        <button class="clear-filters-btn" onclick="clearFilters()">✕ CLEAR FILTERS</button>
    </div>

    <div class="collection-meta-row">
        <div class="collection-count" id="collection-count"></div>
        <div class="view-toggle">
            <button id="btn-list" class="active" onclick="setView('list')" title="List view">☰</button>
            <button id="btn-grid" onclick="setView('grid')" title="Grid view">⊞</button>
        </div>
    </div>

    <ul id="collection-list">
        <li>Loading want list...</li>
    </ul>

    <div class="modal-overlay" id="set-modal" onclick="closeModal(event)">
        <div class="modal-box" id="modal-content">
            <button class="modal-close" onclick="document.getElementById('set-modal').classList.remove('active')">✕</button>
        </div>
    </div>

    <nav class="quick-links"></nav>

    <script src="script.js"></script>
</body>
</html>
